"use strict";(()=>{var e={};e.id=695,e.ids=[695],e.modules={2885:e=>{e.exports=require("@supabase/supabase-js")},145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},9926:e=>{e.exports=import("zod")},6249:(e,r)=>{Object.defineProperty(r,"l",{enumerable:!0,get:function(){return function e(r,t){return t in r?r[t]:"then"in r&&"function"==typeof r.then?r.then(r=>e(r,t)):"function"==typeof r&&"default"===t?r:void 0}}})},699:(e,r,t)=>{t.a(e,async(e,a)=>{try{t.r(r),t.d(r,{config:()=>d,default:()=>c,routeModule:()=>u});var s=t(1802),o=t(7153),n=t(6249),l=t(2082),i=e([l]);l=(i.then?(await i)():i)[0];let c=(0,n.l)(l,"default"),d=(0,n.l)(l,"config"),u=new s.PagesAPIRouteModule({definition:{kind:o.x.PAGES_API,page:"/api/debug-leaderboard",pathname:"/api/debug-leaderboard",bundlePath:"",filename:""},userland:l});a()}catch(e){a(e)}})},2082:(e,r,t)=>{t.a(e,async(e,a)=>{try{t.r(r),t.d(r,{default:()=>n});var s=t(3845),o=e([s]);async function n(e,r){try{console.log("[Debug] Starting leaderboard debug...");let{data:e,error:t}=await s.O.from("leaderboard_summary").select("*",{count:"exact",head:!0});if(t)return console.error("[Debug] Count error:",t),r.status(500).json({success:!1,error:"Count failed",details:t});console.log("[Debug] Count successful, records:",e);let{data:a,error:o}=await s.O.from("leaderboard_summary").select("player_id, rank, date").limit(5);if(o)return console.error("[Debug] Select error:",o),r.status(500).json({success:!1,error:"Select failed",details:o});console.log("[Debug] Select successful, sample data:",a);let{data:n,error:l}=await s.O.from("leaderboard_summary").select(`
        player_id,
        rank,
        players!inner(display_name)
      `).limit(3);if(l)return console.error("[Debug] Join error:",l),r.status(500).json({success:!1,error:"Join failed",details:l});console.log("[Debug] Join successful, joined data:",n);let{data:i,error:c}=await s.O.from("player_streaks").select("player_id, highest_streak").limit(3);if(c)return console.error("[Debug] Streak error:",c),r.status(500).json({success:!1,error:"Streak failed",details:c});console.log("[Debug] Streak successful, streak data:",i),console.log("=== DEBUGGING MATT DUB ISSUE ===");let{data:d,error:u}=await s.O.from("leaderboard_summary").select("*").eq("player_id","3c7d9c19-a71b-4d3a-9e25-61edf8f69c96").order("date",{ascending:!1});u?console.error("Matt Dub query error:",u):console.log("Matt Dub leaderboard_summary data:",JSON.stringify(d,null,2));let _=d?.filter(e=>1===e.rank)||[];console.log("Matt Dub wins (rank = 1):",_.length),console.log("Matt Dub win entries:",JSON.stringify(_,null,2));let{data:f,error:p}=await s.O.from("scores").select("*").eq("player_id","3c7d9c19-a71b-4d3a-9e25-61edf8f69c96").order("created_at",{ascending:!1});p?console.error("Matt Dub scores query error:",p):console.log("Matt Dub scores data:",JSON.stringify(f,null,2));let{data:m,error:b}=await s.O.from("leaderboard_summary").select(`
        id,
        player_id,
        word_id,
        rank,
        was_top_10,
        best_time,
        guesses_used,
        date
      `).order("date",{ascending:!1}).limit(20);return r.status(200).json({success:!0,debug:{leaderboard_count:e,sample_records:a,join_test:n,streak_test:i,timestamp:new Date().toISOString()}})}catch(e){return console.error("[Debug] Unexpected error:",e),r.status(500).json({success:!1,error:"Unexpected error",details:e instanceof Error?e.message:"Unknown error",stack:e instanceof Error?e.stack:void 0})}}s=(o.then?(await o)():o)[0],a()}catch(e){a(e)}})},9085:(e,r,t)=>{t.a(e,async(e,a)=>{try{t.d(r,{O:()=>l});var s=t(9926),o=e([s]);let n=(s=(o.then?(await o)():o)[0]).z.object({SUPABASE_URL:s.z.string().url(),SUPABASE_SERVICE_ROLE_KEY:s.z.string(),SUPABASE_ANON_KEY:s.z.string(),DB_PROVIDER:s.z.literal("supabase"),NODE_ENV:s.z.enum(["development","production"]).default("production"),PORT:s.z.string().transform(Number).default("3001"),FRONTEND_URL:s.z.string().url().default("http://localhost:5173")}).safeParse({SUPABASE_URL:process.env.SUPABASE_URL,SUPABASE_SERVICE_ROLE_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVhY2xsand2c2ljZXpta2pubGJtIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc0NDAyOTc3MiwiZXhwIjoyMDU5NjA1NzcyfQ.qAwl1_vgAK8qMv44dOWPoZ6u_w5PqwGEdRmOgXeKJbY",SUPABASE_ANON_KEY:process.env.SUPABASE_ANON_KEY,DB_PROVIDER:"supabase",NODE_ENV:"production",PORT:process.env.PORT,FRONTEND_URL:process.env.FRONTEND_URL});if(!n.success)throw console.error("âŒ Invalid environment variables:\n",Object.entries(n.error.flatten().fieldErrors).map(([e,r])=>`${e}: ${r?.join(", ")}`).join("\n")),Error("Invalid environment variables");let l=n.data;a()}catch(e){a(e)}})},3845:(e,r,t)=>{t.a(e,async(e,a)=>{try{t.d(r,{O:()=>l});var s=t(2885),o=t(9085),n=e([o]);o=(n.then?(await n)():n)[0];let l=(0,s.createClient)(o.O.SUPABASE_URL,o.O.SUPABASE_SERVICE_ROLE_KEY);a()}catch(e){a(e)}})},7153:(e,r)=>{var t;Object.defineProperty(r,"x",{enumerable:!0,get:function(){return t}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(t||(t={}))},1802:(e,r,t)=>{e.exports=t(145)}};var r=require("../../webpack-api-runtime.js");r.C(e);var t=r(r.s=699);module.exports=t})();