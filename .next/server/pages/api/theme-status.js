"use strict";(()=>{var e={};e.id=143,e.ids=[143],e.modules={2885:e=>{e.exports=require("@supabase/supabase-js")},145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},9926:e=>{e.exports=import("zod")},5677:(e,t,s)=>{s.a(e,async(e,r)=>{try{s.r(t),s.d(t,{config:()=>h,default:()=>l,routeModule:()=>d});var a=s(1802),o=s(7153),u=s(6249),n=s(8651),i=e([n]);n=(i.then?(await i)():i)[0];let l=(0,u.l)(n,"default"),h=(0,u.l)(n,"config"),d=new a.PagesAPIRouteModule({definition:{kind:o.x.PAGES_API,page:"/api/theme-status",pathname:"/api/theme-status",bundlePath:"",filename:""},userland:n});r()}catch(e){r(e)}})},8651:(e,t,s)=>{s.a(e,async(e,r)=>{try{s.r(t),s.d(t,{default:()=>l});var a=s(2885),o=s(9085),u=s(7274),n=s(4229),i=e([o,n]);[o,n]=i.then?(await i)():i,(0,a.createClient)(o.O.SUPABASE_URL,o.O.SUPABASE_SERVICE_ROLE_KEY);let l=(0,u.o)(async function(e,t){if("GET"!==e.method)return t.status(405).json({error:"Method not allowed"});try{let s=e.headers["player-id"]??e.query.player_id;if(!s)return t.status(400).json({error:"Missing player_id"});console.log("[/api/theme-status] Getting theme status for player:",s);let r=await (0,n.gz)();if(console.log("[/api/theme-status] Current theme from getCurrentTheme():",r),!r)return console.log("[/api/theme-status] No current theme found, returning inactive status"),t.status(200).json({hasActiveTheme:!1,progress:{totalWords:0,completedWords:0,themeGuess:null,canGuessTheme:!1,hasGuessedToday:!1,isCorrectGuess:!1},weeklyThemedWords:[]});let a=await (0,n.Gu)(s,r),o=await (0,n.gt)(s,r),u=!1;a.themeGuess&&(u=(await (0,n.nu)(a.themeGuess,r)).isCorrect);let i={hasActiveTheme:!0,progress:{...a,isCorrectGuess:u},weeklyThemedWords:o};return u&&(i.currentTheme=r),console.log("[/api/theme-status] Theme status:",{playerId:s,currentTheme:r,hasGuess:!!a.themeGuess,isCorrectGuess:u,progress:a,weeklyWordsCount:o.length,canGuessTheme:a.canGuessTheme}),t.status(200).json(i)}catch(e){return console.error("[/api/theme-status] Error:",e),t.status(500).json({error:"Failed to get theme status"})}});r()}catch(e){r(e)}})}};var t=require("../../webpack-api-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[58],()=>s(5677));module.exports=r})();